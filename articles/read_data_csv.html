<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Read dataset from original csv files using kelaopendata • kelaopendata</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><link href="../deps/KaTex-0.16.10/katex.min.css" rel="stylesheet">
<script src="../deps/KaTex-0.16.10/katex.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Read dataset from original csv files using kelaopendata">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=B612+Mono:ital,wght@0,400;0,700;1,400;1,700&amp;family=Roboto+Mono:ital,wght@0,100..700;1,100..700&amp;display=swap" rel="stylesheet">
<!-- rogtemplate style sheet --><link href="../BS5/rogtemplate.min.css" rel="stylesheet">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">kelaopendata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/read_data.html">Fetching data using kelaopendata</a></li>
    <li><a class="dropdown-item" href="../articles/read_data_csv.html">Read dataset from original csv files using kelaopendata</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://ropengov.org"><span class="fa fa-users"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rOpenGov/kelaopendata"><span class="fa fab fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Read dataset from original csv files using kelaopendata</h1>
                        <h4 data-toc-skip class="author">Markus
Kainu</h4>
            
            <h4 data-toc-skip class="date">2024-09-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/rOpenGov/kelaopendata/blob/master/vignettes/read_data_csv.Rmd" class="external-link"><code>vignettes/read_data_csv.Rmd</code></a></small>
      <div class="d-none name"><code>read_data_csv.Rmd</code></div>
    </div>

    
    
<p><strong>Installation</strong></p>
<p><code>kelaopendata</code> can be installed from Github using</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install development version from GitHub</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ropengov/kelaopendata"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Let's first create a function that checks if the suggested </span></span>
<span><span class="co"># packages are available</span></span>
<span><span class="va">check_namespaces</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">pkgs</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">pkgs</span>, <span class="va">requireNamespace</span>,quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>In this vignette we show an alternative way for downloading dataset
from origin csv files available at <a href="https://www.avoindata.fi/data/fi/organization/kela" class="external-link uri">https://www.avoindata.fi/data/fi/organization/kela</a> using
<code><a href="../reference/get_data_csv.html">get_data_csv()</a></code>-function. This method does not allow
sql-operations on the fly, as does <code><a href="../reference/get_data.html">get_data()</a></code>-function, so
you have to download the whole dataset. However, if you have issues with
Apache Arrow or Duckdb, or you only have internet access to
avoindata.fi, this is an alternative, though slower and requires more
memory.</p>
<p>We will implement the same task as in <a href="https://ropengov.github.io/kelaopendata/articles/read_data.html">Fetching
data using kelaopendata</a>-vignette.</p>
<div class="section level2">
<h2 id="list-available-datasets">List available datasets<a class="anchor" aria-label="anchor" href="#list-available-datasets"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ropengov.github.io/kelaopendata/">kelaopendata</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">dsets</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/list_datasets.html">list_datasets</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">dsets</span>, n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 25 × 3</span></span></span>
<span><span class="co">#&gt;    modified   name                                                         id   </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2024-08-26 voimassa-olleet-alkaneet-ja-paattyneet-laakekorvausoikeudet  7083…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2024-08-20 kelan-maksaman-perustoimeentulotuen-menot-ja-palautukset     4b64…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2024-08-15 kuntien-rahoittama-tyomarkkinatuki                           970f…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2024-08-15 maksetut-yleiset-asumistuet1                                 f80f…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2024-08-15 kelan-maksamat-elake-etuudet                                 341d…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2024-08-15 maksetut-takuuelakkeet                                       17cd…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2024-08-15 suomen-tyokyvyttomyyselakkeensaajat-sairauden-mukaan         8be0…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2024-08-15 etuuksien-ratkaisut                                          3fec…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2024-08-15 perustoimeentulotuen-saajat                                  af7a…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2024-08-15 takuuelakkeen-saajat-ja-keskimaaraiset-elakkeet              53d5…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 2024-08-15 suomen-elakkeensaajat-ja-keskimaaraiset-elakkeet             e88d…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 2024-08-15 sairauspaivarahojen-saajat-ja-maksetut-etuudet-sairauspaary… a2ce…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 2024-08-15 kelan-elake-etuuden-saajat-ja-keskimaaraiset-etuudet         8df7…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> 2024-08-15 perustoimeentulotuen-saajakotitaloudet                       802e…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> 2024-08-15 sairauspaivarahojen-saajat-ja-maksetut-etuudet-diagnooseitt… dd43…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> 2024-08-15 vanhempainpaivarahojen-saajat-ja-maksetut-etuudet            fcec…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> 2024-08-15 tyomarkkinatuen-saajat-tukipaivien-kertyman-ja-korvausperus… 06fc…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> 2024-08-15 kelan-tyottomyysetuudet-korvausperusteen-mukaan              3080…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> 2024-08-15 kelan-tyottomyysetuuksien-saajat-kuukauden-lopussa           4378…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> 2024-08-15 kunnan-osarahoittaman-tyomarkkinatuen-saajat-ja-maksetut-et… 5dd6…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">21</span> 2024-08-15 koulumatkatuen-saajat-ja-maksetut-tuet                       3937…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">22</span> 2024-08-15 opintotuen-saajat-ja-maksetut-tuet                           6c4d…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">23</span> 2024-08-15 kelan-etuuksien-saajat-ja-maksetut-etuudet                   9af3…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">24</span> 2024-08-15 sairaanhoitokorvausten-saajat-ja-maksetut-korvaukset         2236…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">25</span> 2023-06-19 helsingin-seudun-sairastavuusindeksi                         06f6…</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="obtaining-data-on-financial-aid-for-students-opintotuki">Obtaining data on Financial aid for students (opintotuki)<a class="anchor" aria-label="anchor" href="#obtaining-data-on-financial-aid-for-students-opintotuki"></a>
</h2>
<div class="section level3">
<h3 id="metadata">Metadata<a class="anchor" aria-label="anchor" href="#metadata"></a>
</h3>
<p>For this example we choose “Financial aid for students” as our
benefit of interest. First we download the metadata and print the
description field</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d_id</span> <span class="op">&lt;-</span> <span class="va">dsets</span><span class="op">[</span><span class="va">dsets</span><span class="op">$</span><span class="va">name</span> <span class="op">==</span> <span class="st">"opintotuen-saajat-ja-maksetut-tuet"</span>, <span class="op">]</span><span class="op">$</span><span class="va">id</span></span>
<span><span class="va">meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata.html">get_metadata</a></span><span class="op">(</span>data_id <span class="op">=</span> <span class="va">d_id</span><span class="op">)</span></span>
<span><span class="va">meta</span><span class="op">$</span><span class="va">description</span></span>
<span><span class="co">#&gt; [1] "Tämä tietoaineisto liittyy Kelan tilastotietokanta Kelaston dynaamiseen raporttiin Opintotuen saajat ja maksetut tuet.  \n\nAineistossa on tiedot opintotuen saajista, maksetuista tuista ja keskimääräisistä tuista tilastointijakson aikana. Opintotuen saajia ovat henkilöt, joille on maksettu tilastointijakson aikana säännöllinen tai takautuva opintoraha tai asumislisä, tai joilla on voimassa oleva opintolainan valtiontakaus. Maksettuihin tukiin on tilastoitu säännöllisten tai takautuvien maksujen lisäksi myös opintoetuuksien palautukset. Keskimääräiseen opintotukeen (euroa/saaja) on tilastoitu ainoastaan säännöllisesti maksetut tuet ja opintolainan valtiontakauksen euromäärä.\n\nOpintotuen saajat ja maksetut etuudet tilastoidaan kalenterivuosittain, lukuvuosittain ja kuukausittain. Lukuvuosi alkaa elokuun alussa ja päättyy seuraavan vuoden heinäkuun lopussa. Aineistossa on tietoja vuositasolla vuodesta 2005 alkaen, kuukausitasolla vuodesta 2018 alkaen ja lukuvuositasolla 2005/2006 alkaen.\n\nOppilaitosaste määräytyy etuuden maksutapahtumaan liittyvän oppilaitosnumeron perusteella. Oletusarvoisesti opintotuen saaja tilastoituu tilastointijakson viimeisimmän maksutapahtuman mukaiseen oppilaitosasteeseen. Valinnalla \"Astetiedon peruste: Kaikki oppilaitokset\" tuen saaja tilastoituu kaikkiin tilastointijakson maksutapahtumien mukaisiin oppilaitosasteisiin. Yhteissummassa tuen saaja esiintyy kuitenkin vain kerran.\n\nOppilaitosasteeseen \"Ulkomaiset oppilaitokset\" tilastoituvat ne opintotuen saajat, jotka suorittavat tutkintoa ulkomaisessa oppilaitoksessa.\n\nOpintotuen saajan ikä ja asuinkunta tilastoituvat valitun ajanjakson lopun tietojen mukaisesti. Lukuvuoden tiedoissa ikä ja asuinkunta ovat kuitenkin  lukuvuoteen sisältyvän syyslukukauden lopun tieto."</span></span></code></pre></div>
<p>And then a more technical overview of the content of data set,
containing names of the csv-files, csv-dialect and values and types of
each indicator in the data.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html" class="external-link">toJSON</a></span><span class="op">(</span><span class="va">meta</span><span class="op">$</span><span class="va">resources</span>, pretty <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="co">#&gt; [</span></span>
<span><span class="co">#&gt;   {</span></span>
<span><span class="co">#&gt;     "name": "opintotuen-saajat-ja-maksetut-tuet",</span></span>
<span><span class="co">#&gt;     "path": ["data_2005_2017.csv", "data_2018.csv", "data_2019.csv", "data_2020.csv", "data_2021.csv", "data_2022.csv", "data_2023.csv", "data_2024.csv"],</span></span>
<span><span class="co">#&gt;     "format": "csv",</span></span>
<span><span class="co">#&gt;     "dialect": {</span></span>
<span><span class="co">#&gt;       "delimiter": ","</span></span>
<span><span class="co">#&gt;     },</span></span>
<span><span class="co">#&gt;     "encoding": "UTF-8",</span></span>
<span><span class="co">#&gt;     "pathType": "local",</span></span>
<span><span class="co">#&gt;     "schema": {</span></span>
<span><span class="co">#&gt;       "fields": [</span></span>
<span><span class="co">#&gt;         {</span></span>
<span><span class="co">#&gt;           "name": "aikatyyppi",</span></span>
<span><span class="co">#&gt;           "type": "string",</span></span>
<span><span class="co">#&gt;           "format": "default",</span></span>
<span><span class="co">#&gt;           "values": ["Kuukausi", "Lukuvuosi", "Vuosi"],</span></span>
<span><span class="co">#&gt;           "description": "Tilaston aikajakso:\r\nVuosi\r\nLukuvuosi\r\nKuukausi, tilastointikuukauden tilanne"</span></span>
<span><span class="co">#&gt;         },</span></span>
<span><span class="co">#&gt;         {</span></span>
<span><span class="co">#&gt;           "name": "kuukausi_nro",</span></span>
<span><span class="co">#&gt;           "type": "integer",</span></span>
<span><span class="co">#&gt;           "format": "default",</span></span>
<span><span class="co">#&gt;           "values": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],</span></span>
<span><span class="co">#&gt;           "description": "Maksukuukauden numero."</span></span>
<span><span class="co">#&gt;         },</span></span>
<span><span class="co">#&gt;         {</span></span>
<span><span class="co">#&gt;           "name": "vuosikuukausi",</span></span>
<span><span class="co">#&gt;           "type": "integer",</span></span>
<span><span class="co">#&gt;           "format": "default",</span></span>
<span><span class="co">#&gt;           "values": [200512, 200607, 200612, 200707, 200712, 200807, 200812, 200907, 200912, 201007, 201012, 201107, 201112, 201207, 201212, 201307, 201312, 201407, 201412, 201507, 201512, 201607, 201612, 201707, 201712, 201801, 201802, 201803, 201804, 201805, 201806, 201807, 201808, 201809, 201810, 201811, 201812, 201901, 201902, 201903, 201904, 201905, 201906, 201907, 201908, 201909, 201910, 201911, 201912, 202001, 202002, 202003, 202004, 202005, 202006, 202007, 202008, 202009, 202010, 202011, 202012, 202101, 202102, 202103, 202104, 202105, 202106, 202107, 202108, 202109, 202110, 202111, 202112, 202201, 202202, 202203, 202204, 202205, 202206, 202207, 202208, 202209, 202210, 202211, 202212, 202301, 202302, 202303, 202304, 202305, 202306, 202307, 202308, 202309, 202310, 202311, 202312, 202401, 202402, 202403, 202404, 202405, 202406, 202407],</span></span>
<span><span class="co">#&gt;           "description": "Maksuvuosi ja kuukausi, muotoa VVVVKK."</span></span>
<span><span class="co">#&gt;         },</span></span>
<span><span class="co">#&gt;         {</span></span>
<span><span class="co">#&gt;           "name": "vuosi",</span></span>
<span><span class="co">#&gt;           "type": "integer",</span></span>
<span><span class="co">#&gt;           "format": "default",</span></span>
<span><span class="co">#&gt;           "values": [2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024],</span></span>
<span><span class="co">#&gt;           "description": "Maksuvuosi."</span></span>
<span><span class="co">#&gt;         },</span></span>
<span><span class="co">#&gt;         {</span></span>
<span><span class="co">#&gt;           "name": "kunta_nro",</span></span>
<span><span class="co">#&gt;           "type": "string",</span></span>
<span><span class="co">#&gt;           "format": "default",</span></span>
<span><span class="co">#&gt;           "values": ["004", "005", "006", "009", "010", "015", "016", "017", "018", "019", "020", "035", "040", "043", "044", "045", "046", "047", "049", "050", "051", "052", "060", "061", "069", "071", "072", "073", "074", "075", "076", "077", "078", "079", "081", "082", "083", "084", "085", "086", "090", "091", "092", "095", "097", "098", "099", "101", "102", "103", "105", "106", "108", "109", "111", "139", "140", "142", "143", "145", "146", "148", "149", "150", "151", "152", "153", "163", "164", "165", "167", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "186", "199", "202", "204", "205", "208", "210", "211", "213", "214", "216", "217", "218", "220", "223", "224", "226", "227", "230", "231", "232", "233", "235", "236", "239", "240", "241", "243", "244", "245", "246", "247", "248", "249", "250", "252", "254", "255", "256", "257", "259", "260", "261", "262", "263", "265", "266", "271", "272", "273", "275", "276", "277", "279", "280", "281", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "297", "300", "301", "303", "304", "305", "306", "308", "309", "310", "312", "315", "316", "317", "319", "320", "322", "398", "399", "400", "401", "402", "403", "405", "406", "407", "408", "410", "413", "414", "415", "416", "418", "419", "420", "421", "422", "423", "424", "425", "426", "429", "430", "433", "434", "435", "436", "439", "440", "441", "442", "443", "444", "445", "475", "476", "478", "479", "480", "481", "482", "483", "484", "485", "489", "490", "491", "493", "494", "495", "498", "499", "500", "501", "503", "504", "505", "506", "507", "508", "529", "531", "532", "533", "534", "535", "536", "537", "538", "540", "541", "543", "544", "545", "559", "560", "561", "562", "563", "564", "567", "573", "576", "577", "578", "580", "581", "583", "584", "585", "586", "587", "588", "592", "593", "595", "598", "599", "601", "602", "603", "604", "606", "607", "608", "609", "611", "614", "615", "616", "617", "618", "619", "620", "623", "624", "625", "626", "630", "631", "632", "633", "635", "636", "638", "640", "678", "680", "681", "682", "683", "684", "686", "687", "689", "691", "692", "694", "696", "697", "698", "699", "700", "701", "702", "704", "705", "707", "708", "710", "729", "732", "734", "737", "738", "739", "740", "741", "742", "743", "746", "747", "748", "749", "751", "753", "754", "755", "758", "759", "761", "762", "765", "768", "770", "772", "774", "775", "776", "777", "778", "781", "783", "784", "785", "790", "791", "831", "832", "833", "834", "835", "837", "838", "844", "845", "846", "848", "849", "850", "851", "853", "854", "855", "857", "858", "859", "863", "864", "885", "886", "887", "889", "890", "892", "893", "895", "905", "906", "908", "909", "911", "912", "913", "915", "916", "918", "920", "921", "922", "923", "924", "925", "926", "927", "928", "931", "932", "933", "934", "935", "936", "940", "942", "944", "945", "946", "971", "972", "973", "975", "976", "977", "978", "979", "980", "981", "988", "989", "992"],</span></span>
<span><span class="co">#&gt;           "description": "Kunnan numero tilastointijakson lopulla. Lukuvuoden tiedoissa aluetieto on kuitenkin lukuvuoteen sisältyvän syyslukukauden lopun tieto.\r\nTilastokeskuksen kuntaluokittelu.\r\nArvo 199 tarkoittaa, että ryhmän lukumäärä on alle 4 tai tieto puuttuu.\r\nEnnen vuotta 2014 lakanneet kunnat saavat nimeksi kunnan numeron."</span></span>
<span><span class="co">#&gt;         },</span></span>
<span><span class="co">#&gt;         {</span></span>
<span><span class="co">#&gt;           "name": "kunta_nimi",</span></span>
<span><span class="co">#&gt;           "type": "string",</span></span>
<span><span class="co">#&gt;           "format": "default",</span></span>
<span><span class="co">#&gt;           "values": ["004", "006", "015", "017", "040", "044", "045", "073", "083", "084", "085", "095", "101", "150", "163", "173", "175", "180", "183", "210", "220", "223", "227", "243", "246", "247", "248", "252", "254", "255", "259", "262", "266", "277", "279", "281", "289", "292", "303", "306", "308", "310", "315", "401", "406", "414", "415", "419", "424", "429", "439", "443", "479", "482", "485", "490", "493", "501", "506", "533", "534", "537", "540", "544", "559", "567", "573", "585", "586", "587", "602", "603", "606", "617", "618", "632", "633", "640", "682", "692", "696", "699", "701", "705", "708", "737", "741", "754", "770", "772", "774", "775", "776", "784", "835", "855", "863", "864", "885", "906", "909", "912", "913", "916", "920", "923", "926", "928", "932", "933", "940", "942", "944", "945", "971", "972", "973", "975", "978", "979", "988", "Äänekoski", "Ähtäri", "Akaa", "Alajärvi", "Alavieska", "Alavus", "Asikkala", "Askola", "Aura", "Brändö", "Eckerö", "Enonkoski", "Enontekiö", "Espoo", "Eura", "Eurajoki", "Evijärvi", "Finström", "Forssa", "Haapajärvi", "Haapavesi", "Hailuoto", "Halsua", "Hämeenkoski", "Hämeenkyrö", "Hämeenlinna", "Hamina", "Hammarland", "Hankasalmi", "Hanko", "Harjavalta", "Hartola", "Hattula", "Hausjärvi", "Heinävesi", "Heinola", "Helsinki", "Hirvensalmi", "Hollola", "Honkajoki", "Huittinen", "Humppila", "Hyrynsalmi", "Hyvinkää", "Ii", "Iisalmi", "Iitti", "Ikaalinen", "Ilmajoki", "Ilomantsi", "Imatra", "Inari", "Inkoo", "Isojoki", "Isokyrö", "Jalasjärvi", "Jämijärvi", "Jämsä", "Janakkala", "Järvenpää", "Joensuu", "Jokioinen", "Jomala", "Joroinen", "Joutsa", "Juankoski", "Juuka", "Juupajoki", "Juva", "Jyväskylä", "Kaarina", "Kaavi", "Kajaani", "Kalajoki", "Kangasala", "Kangasniemi", "Kankaanpää", "Kannonkoski", "Kannus", "Karijoki", "Karkkila", "Kärkölä", "Kärsämäki", "Karstula", "Karvia", "Kaskinen", "Kauhajoki", "Kauhava", "Kauniainen", "Kaustinen", "Keitele", "Kemi", "Kemijärvi", "Keminmaa", "Kemiönsaari", "Kempele", "Kerava", "Keuruu", "Kihniö", "Kinnula", "Kirkkonummi", "Kitee", "Kittilä", "Kiuruvesi", "Kivijärvi", "Kokemäki", "Kokkola", "Kolari", "Konnevesi", "Kontiolahti", "Korsnäs", "Koski Tl", "Kotka", "Kouvola", "Köyliö", "Kristiinankaupunki", "Kruunupyy", "Kuhmo", "Kuhmoinen", "Kuopio", "Kuortane", "Kurikka", "Kustavi", "Kuusamo", "Kyyjärvi", "Lahti", "Laihia", "Laitila", "Lapinjärvi", "Lapinlahti", "Lappajärvi", "Lappeenranta", "Lapua", "Laukaa", "Lavia", "Lemi", "Lempäälä", "Leppävirta", "Lestijärvi", "Lieksa", "Lieto", "Liminka", "Liperi", "Lohja", "Loimaa", "Loppi", "Loviisa", "Luhanka", "Lumijoki", "Luoto", "Luumäki", "Luvia", "Maalahti", "Maaninka", "Maarianhamina", "Mäntsälä", "Mänttä-Vilppula", "Mäntyharju", "Marttila", "Masku", "Merijärvi", "Merikarvia", "Miehikkälä", "Mikkeli", "Muhos", "Multia", "Muonio", "Mustasaari", "Muurame", "Mynämäki", "Myrskylä", "Naantali", "Nakkila", "Närpiö", "Nastola", "Nivala", "Nokia", "Nousiainen", "Nurmes", "Nurmijärvi", "Orimattila", "Oripää", "Orivesi", "Oulainen", "Oulu", "Outokumpu", "Padasjoki", "Paimio", "Pälkäne", "Paltamo", "Parainen", "Parikkala", "Parkano", "Pedersören kunta", "Pelkosenniemi", "Pello", "Perho", "Pertunmaa", "Petäjävesi", "Pieksämäki", "Pielavesi", "Pietarsaari", "Pihtipudas", "Pirkkala", "Polvijärvi", "Pomarkku", "Pori", "Pornainen", "Porvoo", "Posio", "Pöytyä", "Pudasjärvi", "Pukkila", "Punkalaidun", "Puolanka", "Puumala", "Pyhäjärvi", "Pyhäjoki", "Pyhäntä", "Pyhäranta", "Pyhtää", "Raahe", "Rääkkylä", "Raasepori", "Raisio", "Rantasalmi", "Ranua", "Rauma", "Rautalampi", "Rautavaara", "Rautjärvi", "Reisjärvi", "Riihimäki", "Ristijärvi", "Rovaniemi", "Ruokolahti", "Ruovesi", "Rusko", "Saarijärvi", "Säkylä", "Salla", "Salo", "Sastamala", "Sauvo", "Savitaipale", "Savonlinna", "Savukoski", "Seinäjoki", "Sievi", "Siikainen", "Siikajoki", "Siikalatva", "Siilinjärvi", "Simo", "Sipoo", "Siuntio", "Sodankylä", "Soini", "Somero", "Sonkajärvi", "Sotkamo", "Sulkava", "Suomussalmi", "Suonenjoki", "Sysmä", "Taipalsaari", "Taivalkoski", "Taivassalo", "Tammela", "Tampere", "Tarvasjoki", "Tervo", "Tervola", "Teuva", "Tohmajärvi", "Toholampi", "Toivakka", "Tornio", "Tuntematon", "Turku", "Tuusniemi", "Tuusula", "Tyrnävä", "Ulvila", "Urjala", "Utajärvi", "Utsjoki", "Uurainen", "Uusikaarlepyy", "Uusikaupunki", "Vaala", "Vaasa", "Valkeakoski", "Valtimo", "Vantaa", "Varkaus", "Vehmaa", "Vesanto", "Vesilahti", "Veteli", "Vieremä", "Vihti", "Viitasaari", "Vimpeli", "Virolahti", "Virrat", "Vöyri", "Ylitornio", "Ylivieska", "Ylöjärvi", "Ypäjä"],</span></span>
<span><span class="co">#&gt;           "description": "Kunnan nimi tilastointijakson lopulla. Lukuvuoden tiedoissa aluetieto on kuitenkin lukuvuoteen sisältyvän syyslukukauden lopun tieto.\r\nTilastokeskuksen kuntaluokittelu. (Huom! Ennen vuotta 2014 lakanneiden kuntien nimet näkyvät aineistossa kuntanumerona).\r\nPuuttuvan/piilotetun tiedon vakioteksti: 'Tuntematon'."</span></span>
<span><span class="co">#&gt;         },</span></span>
<span><span class="co">#&gt;         {</span></span>
<span><span class="co">#&gt;           "name": "ikaryhma",</span></span>
<span><span class="co">#&gt;           "type": "string",</span></span>
<span><span class="co">#&gt;           "format": "default",</span></span>
<span><span class="co">#&gt;           "values": ["16-19", "20-24", "25-29", "30-34", "35-39", "40-44", "45-49", "50-54", "55-", "Tieto puuttuu"],</span></span>
<span><span class="co">#&gt;           "description": "Saajan ikäryhmä tilastointijakson lopussa. Lukuvuoden tiedoissa ikä on kuitenkin ikä lukuvuoteen sisältyvän syyslukukauden lopussa.\r\nIkäryhmä (16–19 v, 20–24 v, …, 50–54 v, yli 54 v)\r\nTieto puuttuu, ryhmän lukumäärä on alle 4 tai tieto puuttuu. Puuttuvan/piilotetun tiedon vakioteksti: 'Tieto puuttuu'."</span></span>
<span><span class="co">#&gt;         },</span></span>
<span><span class="co">#&gt;         {</span></span>
<span><span class="co">#&gt;           "name": "sukupuoli",</span></span>
<span><span class="co">#&gt;           "type": "string",</span></span>
<span><span class="co">#&gt;           "format": "default",</span></span>
<span><span class="co">#&gt;           "values": ["Mies", "Nainen", "Tuntematon"],</span></span>
<span><span class="co">#&gt;           "description": "Sukupuoli:\r\nMies\r\nNainen\r\nTuntematon, ryhmän lukumäärä on alle 4 tai tieto puuttuu. Puuttuvan/piilotetun tiedon vakioteksti: 'Tuntematon'."</span></span>
<span><span class="co">#&gt;         },</span></span>
<span><span class="co">#&gt;         {</span></span>
<span><span class="co">#&gt;           "name": "etuus",</span></span>
<span><span class="co">#&gt;           "type": "string",</span></span>
<span><span class="co">#&gt;           "format": "default",</span></span>
<span><span class="co">#&gt;           "values": ["Aikuisopintoraha", "Asumislisä", "Opintolainan valtiontakaus", "Opintoraha", "Opintoraha ja asumislisä yhteensä", "Yhteensä"],</span></span>
<span><span class="co">#&gt;           "description": "Yhteensä, Opintoraha ja asumislisä yhteensä, \r\nOpintoraha, Asumislisä, aiemmin maksettu Aikuisopintoraha \r\nja Opintolainan valtiontakaus\r\nPuuttuvan/piilotetun tiedon vakioteksti: 'Tieto puuttuu'."</span></span>
<span><span class="co">#&gt;         },</span></span>
<span><span class="co">#&gt;         {</span></span>
<span><span class="co">#&gt;           "name": "oppilaitos_peruste",</span></span>
<span><span class="co">#&gt;           "type": "string",</span></span>
<span><span class="co">#&gt;           "format": "default",</span></span>
<span><span class="co">#&gt;           "values": ["Kaikki oppilaitokset", "Viimeisin oppilaitos"],</span></span>
<span><span class="co">#&gt;           "description": "Oppilaitosasteen peruste\r\nKaikki oppilaitokset                                                                                                    \r\nViimeisin oppilaitos   "</span></span>
<span><span class="co">#&gt;         },</span></span>
<span><span class="co">#&gt;         {</span></span>
<span><span class="co">#&gt;           "name": "oppilaitosaste",</span></span>
<span><span class="co">#&gt;           "type": "string",</span></span>
<span><span class="co">#&gt;           "format": "default",</span></span>
<span><span class="co">#&gt;           "values": ["Ammatilliset oppilaitokset", "Ammattikorkeakoulut", "Lukiot", "Muut oppilaitokset", "Tieto puuttuu", "Ulkomaiset oppilaitokset", "Yhteensä", "Yliopistot"],</span></span>
<span><span class="co">#&gt;           "description": "Oppilaitosaste\r\nYliopistot, Ammattikorkeakoulut, Ammatilliset oppilaitokset, Lukiot, Muut oppilaitokset ja Ulkomaiset oppilaitokset\r\nPuuttuvan/piilotetun tiedon vakioteksti: 'Tieto puuttuu'."</span></span>
<span><span class="co">#&gt;         },</span></span>
<span><span class="co">#&gt;         {</span></span>
<span><span class="co">#&gt;           "name": "saaja_lkm",</span></span>
<span><span class="co">#&gt;           "type": "number",</span></span>
<span><span class="co">#&gt;           "format": "default",</span></span>
<span><span class="co">#&gt;           "values": [0, 15666],</span></span>
<span><span class="co">#&gt;           "description": "Saajien lukumäärä"</span></span>
<span><span class="co">#&gt;         },</span></span>
<span><span class="co">#&gt;         {</span></span>
<span><span class="co">#&gt;           "name": "saaja_laskenta_lkm",</span></span>
<span><span class="co">#&gt;           "type": "number",</span></span>
<span><span class="co">#&gt;           "format": "default",</span></span>
<span><span class="co">#&gt;           "values": [0, 15628],</span></span>
<span><span class="co">#&gt;           "description": "Keskimääräisen etuuden laskentaan tarvittava saajamäärä tarkastelujakson aikana."</span></span>
<span><span class="co">#&gt;         },</span></span>
<span><span class="co">#&gt;         {</span></span>
<span><span class="co">#&gt;           "name": "maksettu_eur",</span></span>
<span><span class="co">#&gt;           "type": "number",</span></span>
<span><span class="co">#&gt;           "format": "default",</span></span>
<span><span class="co">#&gt;           "values": [-10307222.69, 50169562.06],</span></span>
<span><span class="co">#&gt;           "description": "Maksetun etuuden rahamäärä bruttona, palautuksissa saa negatiivisen arvon."</span></span>
<span><span class="co">#&gt;         },</span></span>
<span><span class="co">#&gt;         {</span></span>
<span><span class="co">#&gt;           "name": "maksettu_laskenta_eur",</span></span>
<span><span class="co">#&gt;           "type": "number",</span></span>
<span><span class="co">#&gt;           "format": "default",</span></span>
<span><span class="co">#&gt;           "values": [0, 98366179.03],</span></span>
<span><span class="co">#&gt;           "description": "Keskimääräisen etuuden laskentaan tarvittava euromäärä tarkastelujakson aikana."</span></span>
<span><span class="co">#&gt;         }</span></span>
<span><span class="co">#&gt;       ],</span></span>
<span><span class="co">#&gt;       "missingValues": [""]</span></span>
<span><span class="co">#&gt;     },</span></span>
<span><span class="co">#&gt;     "profile": "data-resource"</span></span>
<span><span class="co">#&gt;   }</span></span>
<span><span class="co">#&gt; ]</span></span></code></pre></div>
<p>A more dense view of variables and their types and descriptions can
be printed with</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta</span><span class="op">$</span><span class="va">resources</span><span class="op">$</span><span class="va">schema</span><span class="op">$</span><span class="va">fields</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">values</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 4</span></span></span>
<span><span class="co">#&gt;    name                  type    format  description                            </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> aikatyyppi            string  default <span style="color: #949494;">"</span>Tilaston aikajakso:\r\nVuosi\r\nLukuv…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> kuukausi_nro          integer default <span style="color: #949494;">"</span>Maksukuukauden numero.<span style="color: #949494;">"</span>               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> vuosikuukausi         integer default <span style="color: #949494;">"</span>Maksuvuosi ja kuukausi, muotoa VVVVKK…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> vuosi                 integer default <span style="color: #949494;">"</span>Maksuvuosi.<span style="color: #949494;">"</span>                          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> kunta_nro             string  default <span style="color: #949494;">"</span>Kunnan numero tilastointijakson lopul…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> kunta_nimi            string  default <span style="color: #949494;">"</span>Kunnan nimi tilastointijakson lopulla…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ikaryhma              string  default <span style="color: #949494;">"</span>Saajan ikäryhmä tilastointijakson lop…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> sukupuoli             string  default <span style="color: #949494;">"</span>Sukupuoli:\r\nMies\r\nNainen\r\nTunte…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> etuus                 string  default <span style="color: #949494;">"</span>Yhteensä, Opintoraha ja asumislisä yh…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> oppilaitos_peruste    string  default <span style="color: #949494;">"</span>Oppilaitosasteen peruste\r\nKaikki op…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> oppilaitosaste        string  default <span style="color: #949494;">"</span>Oppilaitosaste\r\nYliopistot, Ammatti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> saaja_lkm             number  default <span style="color: #949494;">"</span>Saajien lukumäärä<span style="color: #949494;">"</span>                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> saaja_laskenta_lkm    number  default <span style="color: #949494;">"</span>Keskimääräisen etuuden laskentaan tar…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> maksettu_eur          number  default <span style="color: #949494;">"</span>Maksetun etuuden rahamäärä bruttona, …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> maksettu_laskenta_eur number  default <span style="color: #949494;">"</span>Keskimääräisen etuuden laskentaan tar…</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="quering-downloading-and-plotting-the-data">Quering, downloading and plotting the data<a class="anchor" aria-label="anchor" href="#quering-downloading-and-plotting-the-data"></a>
</h3>
<p>Let’s query data on recipients of Student loan in the city of Turku
using <code><a href="../reference/get_data.html">kelaopendata::get_data()</a></code>-function</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d_raw</span> <span class="op">&lt;-</span> <span class="fu">kelaopendata</span><span class="fu">::</span><span class="fu"><a href="../reference/get_data_csv.html">get_data_csv</a></span><span class="op">(</span>data_id <span class="op">=</span> <span class="va">d_id</span><span class="op">)</span></span>
<span><span class="va">d_opintotuki</span> <span class="op">&lt;-</span> <span class="va">d_raw</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">etuus</span> <span class="op">==</span> <span class="st">'Opintolainan valtiontakaus'</span>,</span>
<span>         <span class="va">aikatyyppi</span> <span class="op">==</span> <span class="st">'Vuosi'</span>,</span>
<span>         <span class="va">kunta_nimi</span> <span class="op">==</span> <span class="st">'Turku'</span>,</span>
<span>         <span class="va">etuus</span> <span class="op">==</span> <span class="st">'Opintolainan valtiontakaus'</span>,</span>
<span>         <span class="va">oppilaitos_peruste</span> <span class="op">==</span> <span class="st">'Viimeisin oppilaitos'</span><span class="op">)</span></span></code></pre></div>
<p>Next, let’s filter the data locally in R a bit more.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d_plot</span> <span class="op">&lt;-</span> <span class="va">d_opintotuki</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># Exclude</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">sukupuoli</span> <span class="op">!=</span> <span class="st">"Tuntematon"</span>,<span class="op">!</span><span class="va">oppilaitosaste</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Tieto puuttuu"</span>, <span class="st">"Yhteensä"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>oppilaitosaste <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span></span>
<span>    <span class="va">oppilaitosaste</span>,</span>
<span>    levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Yliopistot"</span>,</span>
<span>      <span class="st">"Ammattikorkeakoulut"</span>,</span>
<span>      <span class="st">"Ammatilliset oppilaitokset"</span>,</span>
<span>      <span class="st">"Lukiot"</span>,</span>
<span>      <span class="st">"Muut oppilaitokset"</span>,</span>
<span>      <span class="st">"Ulkomaiset oppilaitokset"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Finally, let’s draw a plot on recipients by gender and type of
institution</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">d_plot</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">vuosi</span>, y <span class="op">=</span> <span class="va">saaja_lkm</span>, fill <span class="op">=</span> <span class="va">ikaryhma</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_stack.html" class="external-link">position_stack</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">oppilaitosaste</span> <span class="op">~</span> <span class="va">sukupuoli</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Recipients of government guarantee for a student loan in\nthe city of Turku in 2004 to 2024 by gender and type of institution"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="read_data_csv_files/figure-html/unnamed-chunk-9-1.png" width="600"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Markus Kainu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>



    <!-- Add ropengov logo -->
  <script src="../BS5/logo.js"></script>
</body>
</html>
